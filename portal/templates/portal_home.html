{%extends "loginbase.html"%}

{%block title%}User: {{profile.name}} ({{ session['displayname'] }}){%endblock%}

{%block body%}
{%include 'messages.html'%}

<div class="content">
  <div class="container-fluid">
    <div class="row">

      <div class="col-md-12">
        <div class="card">

          <div class="header">
            <ol class="breadcrumb">
              <li class="breadcrumb-item active"><a href="{{url_for('portal')}}">Portal Home</a></li>
              <!-- <li class="breadcrumb-item active">Profile</li> -->
            </ol>
            <h3 class="title">
                Welcome <span style="color:#2b2b2b">{{profile.displayname}}</span>
            </h3>
            <!-- <a href="{{url_for('show_profile_page')}}" class="btn btn-primary btn-sm" title="Edit Profile">Edit Profile</a> -->
						<hr/>
          </div>

          <div class="content description">
  					<div class="card-block" id="portal-home-block">

              <div class="content description">

                <div class="card">
      						<div class="card-block">

                    <ul class="nav nav-tabs">
                      <li class="active"><a data-toggle="tab" href="#portal-diagram">Launching Virtual Cluster</a></li>
                      <li><a data-toggle="tab" href="#internal-diagram">Inside VC3</a></li>
                      <li><a data-toggle="tab" href="#resources">Curated</a></li>
                      <li><a data-toggle="tab" href="#resource-inprogress">Coming Soon</a></li>
                    </ul>

                    <div class="tab-content">

                      <div id="portal-diagram" class="tab-pane fade in active">
                        <div class="row">
                          <div class="card-block panel-body" style="font-size: 16px">
                            <h2 class="title">
                              <small>Steps to Launch Virtual Cluster</small>
                            </h2>
                            <ol>
                              <li>Register resource <a href="{{url_for('create_allocation')}}">allocations</a>.</li>
                              <li>Add allocations to projects.</li>
                              <li>Define a cluster template, or use one from the public library</li>
                              <li>Create desired software environment for the workers.</li>
                              <li>Launch virtual cluster.</li>
                              <br>
                              For more information, please visit our <a href="https://vc3-project.github.io/vc3-mkdocs/" target="_blank">documentation guide</a>
                            </ol>
                            <img id="vc3diagram-portal" src="{{url_for('static', filename='img/vc3_portal_diagram_num.png')}}">
                          </div>
                        </div><!-- /.row -->
                      </div><!-- #portal-diagram-->

                      <div id="internal-diagram" class="tab-pane fade in">
                        <h2 class="title">
                          <small>Inside the VC3 Dynamic Infrastructure</small>
                        </h2>
                        <hr/>
                        <div class="row">
                          <img id="vc3diagram" src="{{url_for('static', filename='img/vc3_internal_diagram_updated_180402.png')}}">
                        </div>
                      </div>

                      <div id="resources" class="tab-pane fade in">
          							<div class="panel panel-primary filterable">
          								<div class="panel-heading">
          									<h3 class="panel-title">Resource Profiles</h3>
          									<div class="pull-right">
          										<button class="btn btn-primary btn-sm btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
          									</div>
          								</div>
                          <div class="table-responsive" style="overflow-x:auto;">
            								<table class="display table table-hover" width="100%">
            									<thead>
            										<tr class="filters">
            											<th><input type="text" class="form-control" placeholder="Name" disabled></th>
            											<th><input type="text" class="form-control" placeholder="Status" disabled></th>
            											<th><input type="text" class="form-control" placeholder="Organization" disabled></th>
            										</tr>
            									</thead>
            									<tbody data-link="row" class="rowlink">
          											{% for resource in resources %}
                                  {% if resource.public %}
          											<tr>
          												<td><a href="{{ url_for('view_resource', name=resource.name) }}" title="View Resource Profile">{{ resource.displayname }}</a></td>
          												<td><i class="fa fa-check" aria-hidden="true" style="color:green"></i> Healthy</td>
          												<td>{{resource.organization}}</td>
          											</tr>
                                  {% endif %}
          											{% endfor %}
            									</tbody>
            								</table>
                          </div>
          							</div>
                      </div>

                      <div id="resource-inprogress" class="tab-pane fade in">
                        <div class="panel panel-primary filterable">
                          <div class="panel-heading">
                            <h3 class="panel-title">Resources In Progress</h3>
                            <div class="pull-right">
                              <button class="btn btn-primary btn-sm btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
                            </div>
                          </div>
                          <div class="table-responsive" style="overflow-x:auto;">
                            <table class="display table table-hover" width="100%">
                              <thead>
                                <tr class="filters">
                                  <th><input type="text" class="form-control" placeholder="Name" disabled></th>
                                  <th><input type="text" class="form-control" placeholder="Status" disabled></th>
                                  <th><input type="text" class="form-control" placeholder="Organization" disabled></th>
                                </tr>
                              </thead>
                              <tbody data-link="row" class="rowlink">
                                {% for resource in resources %}
                                  {% if not resource.public %}
                                <tr>
                                  <td><a href="{{ url_for('view_resource', name=resource.name) }}" title="View Resource Profile">{{ resource.displayname }}</a></td>
                                  <td><i class="fa fa-check" aria-hidden="true" style="color:green"></i> Healthy</td>
                                  <td>{{resource.organization}}</td>
                                </tr>
                                  {% endif %}
                                {% endfor %}
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div><!-- ./tab-content -->

      						</div><!-- ./card-block -->
      					</div><!-- ./card -->

              </div><!-- /.content description -->


            </div><!-- /.card-block -->
          </div><!-- /.card description-->
        </div><!-- /.card -->
  		</div><!-- /.col-md-6 -->

    </div>
  </div>
</div>

{%endblock%}
